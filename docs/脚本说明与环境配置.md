# 🛠️ 脚本说明与环境配置 (Scripts & Env)

## 1. 脚本命令说明 (Scripts)

> 注意：以下命令需在 `web` 目录下执行。

在 `web` 目录下，您可以使用 `npm run <command>` 来执行以下命令：

| 命令 | 说明 | 适用场景 |
| :--- | :--- | :--- |
| `dev` | 启动本地开发服务器 | 日常开发。默认加载 `.env` 和 `.env.development`。支持热更新 (HMR)。 |
| `build` | 构建生产环境代码 | 部署前执行。默认加载 `.env` 和 `.env.production`。会先执行 `vue-tsc` 类型检查，通过后打包到 `dist/` 目录。 |
| `preview` | 预览构建后的代码 | 在本地模拟生产环境运行 `dist/` 目录下的代码。**必须先执行 `build` 命令**。 |
| `type-check` | 执行 TypeScript 类型检查 | 仅检查类型错误，不生成文件。用于 CI/CD 流程或代码提交前自查。 |

---

## 2. 环境变量配置 (Environment Variables)

项目使用了 Vite 的环境变量加载机制。

### 文件说明

*   **`.env`**: **通用配置**。所有环境都会加载，作为兜底配置。
*   **`.env.development`**: **开发环境配置**。仅在 `npm run dev` 时加载，会覆盖 `.env` 中的配置。
*   **`.env.production`**: **生产环境配置**。仅在 `npm run build` 时加载，会覆盖 `.env` 中的配置。

### 加载顺序 (Loading Order)

Vite 会按照以下顺序加载环境变量文件（后加载的配置会覆盖先加载的配置）：

1.  `.env`
2.  `.env.local`
3.  `.env.[mode]` (例如 `.env.development`)
4.  `.env.[mode].local` (例如 `.env.development.local`)

**示例：开发模式 (`npm run dev`)**
1.  先加载 `.env`
2.  后加载 `.env.development` (如果有同名变量，此处的值会生效)

**示例：生产模式 (`npm run build`)**
1.  先加载 `.env`
2.  后加载 `.env.production` (如果有同名变量，此处的值会生效)

### 变量定义规范

*   只有以 `VITE_` 开头的变量才会被暴露给客户端代码。
*   在代码中通过 `import.meta.env.VITE_VARIABLE_NAME` 访问。

---

## 3. 常用配置项

| 变量名 | 作用 | 示例值 |
| :--- | :--- | :--- |
| `VITE_APP_TITLE` | 网页标题 | RBAC Admin Pro |
| `VITE_APP_BASE_API` | 接口基础路径 (Axios BaseURL) | `/api` (统一配置) |
| `VITE_API_URL` | 真实的后端接口地址 (用于反向代理) | `http://localhost:3000` |

---

## 4. 后端对接说明

当前项目默认使用 Mock 数据，若要对接真实后端：

1.  修改 `web/.env.development` 中的 `VITE_API_URL` 为真实后端地址（例如 `http://localhost:3000`）。
2.  在 `web/vite.config.ts` 中配置 `server.proxy`，将 `/api` 代理到 `VITE_API_URL`。
3.  在 `web/src/permission.ts` 中取消动态路由生成的注释。
