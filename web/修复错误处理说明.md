# å‰ç«¯é”™è¯¯å¤„ç†ä¿®å¤è¯´æ˜

## é—®é¢˜æè¿°

Vue è­¦å‘Š: `Unhandled error during execution of native event handler`

è¿™æ˜¯å› ä¸ºæŸäº› `handleSubmit` å‡½æ•°ä¸­ç¼ºå°‘ `catch` å—æ¥å¤„ç†å¼‚æ­¥é”™è¯¯ã€‚

## âœ… å·²ä¿®å¤çš„æ–‡ä»¶

æ‰€æœ‰æ–‡ä»¶çš„ `handleSubmit` å‡½æ•°å·²æ·»åŠ é”™è¯¯å¤„ç†:

- âœ… `views/system/user/index.vue` - ç”¨æˆ·ç®¡ç†
- âœ… `views/system/role/index.vue` - è§’è‰²ç®¡ç†
- âœ… `views/system/menu/index.vue` - èœå•ç®¡ç†
- âœ… `views/system/dept/index.vue` - éƒ¨é—¨ç®¡ç†
- âœ… `views/system/post/index.vue` - å²—ä½ç®¡ç†
- âœ… `views/system/config/index.vue` - å‚æ•°é…ç½®
- âœ… `views/system/notice/index.vue` - é€šçŸ¥å…¬å‘Š
- âœ… `views/monitor/job/index.vue` - å®šæ—¶ä»»åŠ¡

## ğŸ‰ ä¿®å¤å®Œæˆ

æ‰€æœ‰å¾…ä¿®å¤æ–‡ä»¶å·²å®Œæˆé”™è¯¯å¤„ç†æ·»åŠ !

## ä¿®å¤æ¨¡æ¿

åœ¨æ¯ä¸ª `handleSubmit` å‡½æ•°çš„ `try` å—åæ·»åŠ  `catch` å—:

```typescript
async function handleSubmit() {
  // éªŒè¯é€»è¾‘...
  
  submitLoading.value = true
  try {
    // æäº¤é€»è¾‘...
    showDialog.value = false
    getList()
  } catch (error) {
    console.error('æäº¤å¤±è´¥:', error)
    // é”™è¯¯å·²ç”±è¯·æ±‚æ‹¦æˆªå™¨å¤„ç†,è¿™é‡Œåªéœ€è®°å½•æ—¥å¿—
  } finally {
    submitLoading.value = false
  }
}
```

## å…¨å±€é”™è¯¯å¤„ç†å·¥å…·

å·²åˆ›å»º `src/utils/error-handler.ts`,æä¾›ä»¥ä¸‹å·¥å…·å‡½æ•°:

### 1. handleError
```typescript
import { handleError } from '@/utils/error-handler'

try {
  await someAsyncOperation()
} catch (error) {
  handleError(error, 'OperationContext')
}
```

### 2. withErrorHandler
```typescript
import { withErrorHandler } from '@/utils/error-handler'

const safeSubmit = withErrorHandler(handleSubmit, 'UserSubmit')
```

### 3. safeAsync
```typescript
import { safeAsync } from '@/utils/error-handler'

const result = await safeAsync(
  () => fetchData(),
  { 
    context: 'FetchData',
    defaultValue: []
  }
)
```

## æ‰¹é‡ä¿®å¤å‘½ä»¤

å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ‰¹é‡æŸ¥æ‰¾éœ€è¦ä¿®å¤çš„æ–‡ä»¶:

```bash
# æŸ¥æ‰¾æ‰€æœ‰ handleSubmit å‡½æ•°
grep -r "async function handleSubmit" web/src/views/

# æŸ¥æ‰¾ç¼ºå°‘ catch çš„ handleSubmit
grep -A 20 "async function handleSubmit" web/src/views/ | grep -v "catch"
```

## éªŒè¯ä¿®å¤

ä¿®å¤å,åœ¨æµè§ˆå™¨æ§åˆ¶å°åº”è¯¥ä¸å†çœ‹åˆ° Vue è­¦å‘Šã€‚

å¦‚æœä»æœ‰è­¦å‘Š,æ£€æŸ¥:
1. æ˜¯å¦æ‰€æœ‰å¼‚æ­¥å‡½æ•°éƒ½æœ‰é”™è¯¯å¤„ç†
2. æ˜¯å¦æœ‰å…¶ä»–äº‹ä»¶å¤„ç†å‡½æ•°ç¼ºå°‘é”™è¯¯å¤„ç†
3. æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°çš„å®Œæ•´é”™è¯¯å †æ ˆ
