generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
}

/// 部门表
model SysDept {
  deptId      BigInt    @id @default(autoincrement()) @map("dept_id") /// 部门ID
  parentId    BigInt?   @map("parent_id") /// 父部门ID
  ancestors   String?   @default("") @db.VarChar(500) /// 祖级列表
  deptName    String    @map("dept_name") @db.VarChar(50) /// 部门名称
  orderNum    Int?      @default(0) @map("order_num") /// 显示顺序
  leader      String?   @db.VarChar(20) /// 负责人
  phone       String?   @db.VarChar(11) /// 联系电话
  email       String?   @db.VarChar(50) /// 邮箱
  status      String?   @default("0") @db.Char(1) /// 部门状态（0正常 1停用）
  delFlag     String?   @default("0") @map("del_flag") @db.Char(1) /// 删除标志（0代表存在 2代表删除）
  createBy    String?   @default("") @map("create_by") @db.VarChar(64) /// 创建者
  createTime  DateTime? @default(now()) @map("create_time") @db.Timestamp(6) /// 创建时间
  updateBy    String?   @default("") @map("update_by") @db.VarChar(64) /// 更新者
  updateTime  DateTime? @updatedAt @map("update_time") @db.Timestamp(6) /// 更新时间

  // Relations
  parent      SysDept?  @relation("DeptToDept", fields: [parentId], references: [deptId])
  children    SysDept[] @relation("DeptToDept")
  users       SysUser[]
  roles       SysRoleDept[]

  @@map("sys_dept")
}

/// 用户信息表
model SysUser {
  userId      BigInt    @id @default(autoincrement()) @map("user_id") /// 用户ID
  deptId      BigInt?   @map("dept_id") /// 部门ID
  userName    String    @map("user_name") @db.VarChar(30) /// 用户账号
  nickName    String    @map("nick_name") @db.VarChar(30) /// 用户昵称
  userType    String?   @default("00") @map("user_type") @db.VarChar(2) /// 用户类型（00系统用户）
  email       String?   @default("") @db.VarChar(50) /// 用户邮箱
  phonenumber String?   @default("") @db.VarChar(11) /// 手机号码
  sex         String?   @default("0") @db.Char(1) /// 用户性别（0男 1女 2未知）
  avatar      String?   @default("") @db.VarChar(100) /// 头像地址
  password    String?   @default("") @db.VarChar(100) /// 密码
  status      String?   @default("0") @db.Char(1) /// 帐号状态（0正常 1停用）
  delFlag     String?   @default("0") @map("del_flag") @db.Char(1) /// 删除标志（0代表存在 2代表删除）
  loginIp     String?   @default("") @map("login_ip") @db.VarChar(128) /// 最后登录IP
  loginDate   DateTime? @map("login_date") @db.Timestamp(6) /// 最后登录时间
  createBy    String?   @default("") @map("create_by") @db.VarChar(64) /// 创建者
  createTime  DateTime? @default(now()) @map("create_time") @db.Timestamp(6) /// 创建时间
  updateBy    String?   @default("") @map("update_by") @db.VarChar(64) /// 更新者
  updateTime  DateTime? @updatedAt @map("update_time") @db.Timestamp(6) /// 更新时间
  remark      String?   @db.VarChar(500) /// 备注

  // Relations
  dept        SysDept?      @relation(fields: [deptId], references: [deptId])
  roles       SysUserRole[]
  posts       SysUserPost[]

  @@map("sys_user")
}

/// 岗位信息表
model SysPost {
  postId      BigInt    @id @default(autoincrement()) @map("post_id") /// 岗位ID
  postCode    String    @map("post_code") @db.VarChar(64) /// 岗位编码
  postName    String    @map("post_name") @db.VarChar(50) /// 岗位名称
  postSort    Int       @map("post_sort") /// 显示顺序
  status      String    @db.Char(1) /// 状态（0正常 1停用）
  createBy    String?   @default("") @map("create_by") @db.VarChar(64) /// 创建者
  createTime  DateTime? @default(now()) @map("create_time") @db.Timestamp(6) /// 创建时间
  updateBy    String?   @default("") @map("update_by") @db.VarChar(64) /// 更新者
  updateTime  DateTime? @updatedAt @map("update_time") @db.Timestamp(6) /// 更新时间
  remark      String?   @db.VarChar(500) /// 备注

  // Relations
  users       SysUserPost[]

  @@map("sys_post")
}

/// 角色信息表
model SysRole {
  roleId            BigInt    @id @default(autoincrement()) @map("role_id") /// 角色ID
  roleName          String    @map("role_name") @db.VarChar(30) /// 角色名称
  roleKey           String    @map("role_key") @db.VarChar(100) /// 角色权限字符串
  roleSort          Int       @map("role_sort") /// 显示顺序
  dataScope         String?   @default("1") @map("data_scope") @db.Char(1) /// 数据范围（1：全部数据权限 2：自定数据权限 3：本部门数据权限 4：本部门及以下数据权限）
  menuCheckStrictly Boolean?  @default(true) @map("menu_check_strictly") /// 菜单树选择项是否关联显示
  deptCheckStrictly Boolean?  @default(true) @map("dept_check_strictly") /// 部门树选择项是否关联显示
  status            String    @db.Char(1) /// 角色状态（0正常 1停用）
  delFlag           String?   @default("0") @map("del_flag") @db.Char(1) /// 删除标志（0代表存在 2代表删除）
  createBy          String?   @default("") @map("create_by") @db.VarChar(64) /// 创建者
  createTime        DateTime? @default(now()) @map("create_time") @db.Timestamp(6) /// 创建时间
  updateBy          String?   @default("") @map("update_by") @db.VarChar(64) /// 更新者
  updateTime        DateTime? @updatedAt @map("update_time") @db.Timestamp(6) /// 更新时间
  remark            String?   @db.VarChar(500) /// 备注

  // Relations
  users       SysUserRole[]
  menus       SysRoleMenu[]
  depts       SysRoleDept[]

  @@map("sys_role")
}

/// 菜单权限表
model SysMenu {
  menuId      BigInt    @id @default(autoincrement()) @map("menu_id") /// 菜单ID
  menuName    String    @map("menu_name") @db.VarChar(50) /// 菜单名称
  parentId    BigInt?   @map("parent_id") /// 父菜单ID
  orderNum    Int?      @default(0) @map("order_num") /// 显示顺序
  path        String?   @default("") @db.VarChar(200) /// 路由地址
  component   String?   @db.VarChar(255) /// 组件路径
  isFrame     Int?      @default(1) @map("is_frame") /// 是否为外链（0是 1否）
  isCache     Int?      @default(0) @map("is_cache") /// 是否缓存（0缓存 1不缓存）
  menuType    String?   @default("") @map("menu_type") @db.Char(1) /// 菜单类型（M目录 C菜单 F按钮）
  visible     String?   @default("0") @db.Char(1) /// 菜单状态（0显示 1隐藏）
  status      String?   @default("0") @db.Char(1) /// 菜单状态（0正常 1停用）
  perms       String?   @db.VarChar(100) /// 权限标识
  icon        String?   @default("#") @db.VarChar(100) /// 菜单图标
  createBy    String?   @default("") @map("create_by") @db.VarChar(64) /// 创建者
  createTime  DateTime? @default(now()) @map("create_time") @db.Timestamp(6) /// 创建时间
  updateBy    String?   @default("") @map("update_by") @db.VarChar(64) /// 更新者
  updateTime  DateTime? @updatedAt @map("update_time") @db.Timestamp(6) /// 更新时间
  remark      String?   @db.VarChar(500) /// 备注

  // Relations
  parent      SysMenu?      @relation("MenuToMenu", fields: [parentId], references: [menuId])
  children    SysMenu[]     @relation("MenuToMenu")
  roles       SysRoleMenu[]

  @@map("sys_menu")
}

/// 用户和角色关联表
model SysUserRole {
  userId BigInt @map("user_id") /// 用户ID
  roleId BigInt @map("role_id") /// 角色ID

  user SysUser @relation(fields: [userId], references: [userId])
  role SysRole @relation(fields: [roleId], references: [roleId])

  @@id([userId, roleId])
  @@map("sys_user_role")
}

/// 角色和菜单关联表
model SysRoleMenu {
  roleId BigInt @map("role_id") /// 角色ID
  menuId BigInt @map("menu_id") /// 菜单ID

  role SysRole @relation(fields: [roleId], references: [roleId])
  menu SysMenu @relation(fields: [menuId], references: [menuId])

  @@id([roleId, menuId])
  @@map("sys_role_menu")
}

/// 角色和部门关联表
model SysRoleDept {
  roleId BigInt @map("role_id") /// 角色ID
  deptId BigInt @map("dept_id") /// 部门ID

  role SysRole @relation(fields: [roleId], references: [roleId])
  dept SysDept @relation(fields: [deptId], references: [deptId])

  @@id([roleId, deptId])
  @@map("sys_role_dept")
}

/// 用户与岗位关联表
model SysUserPost {
  userId BigInt @map("user_id") /// 用户ID
  postId BigInt @map("post_id") /// 岗位ID

  user SysUser @relation(fields: [userId], references: [userId])
  post SysPost @relation(fields: [postId], references: [postId])

  @@id([userId, postId])
  @@map("sys_user_post")
}

/// 操作日志记录
model SysOperLog {
  operId        BigInt    @id @default(autoincrement()) @map("oper_id") /// 日志主键
  title         String?   @default("") @db.VarChar(50) /// 模块标题
  businessType  Int?      @default(0) @map("business_type") /// 业务类型（0其它 1新增 2修改 3删除）
  method        String?   @default("") @db.VarChar(100) /// 方法名称
  requestMethod String?   @default("") @map("request_method") @db.VarChar(10) /// 请求方式
  operatorType  Int?      @default(0) @map("operator_type") /// 操作类别（0其它 1后台用户 2手机端用户）
  operName      String?   @default("") @map("oper_name") @db.VarChar(50) /// 操作人员
  deptName      String?   @default("") @map("dept_name") @db.VarChar(50) /// 部门名称
  operUrl       String?   @default("") @map("oper_url") @db.VarChar(255) /// 请求URL
  operIp        String?   @default("") @map("oper_ip") @db.VarChar(128) /// 主机IP地址
  operLocation  String?   @default("") @map("oper_location") @db.VarChar(255) /// 操作地点
  operParam     String?   @default("") @map("oper_param") @db.Text /// 请求参数
  jsonResult    String?   @default("") @map("json_result") @db.Text /// 返回参数
  status        Int?      @default(0) /// 操作状态（0正常 1异常）
  errorMsg      String?   @default("") @map("error_msg") @db.Text /// 错误消息
  operTime      DateTime? @default(now()) @map("oper_time") @db.Timestamp(6) /// 操作时间

  @@map("sys_oper_log")
}

/// 字典类型表
model SysDictType {
  dictId     BigInt    @id @default(autoincrement()) @map("dict_id") /// 字典主键
  dictName   String?   @default("") @map("dict_name") @db.VarChar(100) /// 字典名称
  dictType   String?   @default("") @map("dict_type") @db.VarChar(100) /// 字典类型
  status     String?   @default("0") @db.Char(1) /// 状态（0正常 1停用）
  createBy   String?   @default("") @map("create_by") @db.VarChar(64) /// 创建者
  createTime DateTime? @default(now()) @map("create_time") @db.Timestamp(6) /// 创建时间
  updateBy   String?   @default("") @map("update_by") @db.VarChar(64) /// 更新者
  updateTime DateTime? @updatedAt @map("update_time") @db.Timestamp(6) /// 更新时间
  remark     String?   @db.VarChar(500) /// 备注

  @@map("sys_dict_type")
}

/// 字典数据表
model SysDictData {
  dictCode   BigInt    @id @default(autoincrement()) @map("dict_code") /// 字典编码
  dictSort   Int?      @default(0) @map("dict_sort") /// 字典排序
  dictLabel  String?   @default("") @map("dict_label") @db.VarChar(100) /// 字典标签
  dictValue  String?   @default("") @map("dict_value") @db.VarChar(100) /// 字典键值
  dictType   String?   @default("") @map("dict_type") @db.VarChar(100) /// 字典类型
  cssClass   String?   @map("css_class") @db.VarChar(100) /// 样式属性
  listClass  String?   @map("list_class") @db.VarChar(100) /// 表格回显样式
  isDefault  String?   @default("N") @map("is_default") @db.Char(1) /// 是否默认（Y是 N否）
  status     String?   @default("0") @db.Char(1) /// 状态（0正常 1停用）
  createBy   String?   @default("") @map("create_by") @db.VarChar(64) /// 创建者
  createTime DateTime? @default(now()) @map("create_time") @db.Timestamp(6) /// 创建时间
  updateBy   String?   @default("") @map("update_by") @db.VarChar(64) /// 更新者
  updateTime DateTime? @updatedAt @map("update_time") @db.Timestamp(6) /// 更新时间
  remark     String?   @db.VarChar(500) /// 备注

  @@map("sys_dict_data")
}

/// 参数配置表
model SysConfig {
  configId    BigInt    @id @default(autoincrement()) @map("config_id") /// 参数主键
  configName  String?   @default("") @map("config_name") @db.VarChar(100) /// 参数名称
  configKey   String?   @default("") @map("config_key") @db.VarChar(100) /// 参数键名
  configValue String?   @default("") @map("config_value") @db.VarChar(500) /// 参数键值
  configType  String?   @default("N") @map("config_type") @db.Char(1) /// 系统内置（Y是 N否）
  createBy    String?   @default("") @map("create_by") @db.VarChar(64) /// 创建者
  createTime  DateTime? @default(now()) @map("create_time") @db.Timestamp(6) /// 创建时间
  updateBy    String?   @default("") @map("update_by") @db.VarChar(64) /// 更新者
  updateTime  DateTime? @updatedAt @map("update_time") @db.Timestamp(6) /// 更新时间
  remark      String?   @db.VarChar(500) /// 备注

  @@map("sys_config")
}

/// 系统访问记录
model SysLoginLog {
  infoId        BigInt    @id @default(autoincrement()) @map("info_id") /// 访问ID
  userName      String?   @default("") @map("user_name") @db.VarChar(50) /// 用户账号
  ipaddr        String?   @default("") @db.VarChar(128) /// 登录IP地址
  loginLocation String?   @default("") @map("login_location") @db.VarChar(255) /// 登录地点
  browser       String?   @default("") @db.VarChar(50) /// 浏览器类型
  os            String?   @default("") @db.VarChar(50) /// 操作系统
  status        String?   @default("0") @db.Char(1) /// 登录状态（0成功 1失败）
  msg           String?   @default("") @db.VarChar(255) /// 提示消息
  loginTime     DateTime? @default(now()) @map("login_time") @db.Timestamp(6) /// 访问时间

  @@map("sys_login_log")
}

/// 通知公告表
model SysNotice {
  noticeId      BigInt    @id @default(autoincrement()) @map("notice_id") /// 公告ID
  noticeTitle   String    @map("notice_title") @db.VarChar(50) /// 公告标题
  noticeType    String    @map("notice_type") @db.Char(1) /// 公告类型（1通知 2公告）
  noticeContent String?   @map("notice_content") @db.Text /// 公告内容
  status        String?   @default("0") @db.Char(1) /// 公告状态（0正常 1关闭）
  createBy      String?   @default("") @map("create_by") @db.VarChar(64) /// 创建者
  createTime    DateTime? @default(now()) @map("create_time") @db.Timestamp(6) /// 创建时间
  updateBy      String?   @default("") @map("update_by") @db.VarChar(64) /// 更新者
  updateTime    DateTime? @updatedAt @map("update_time") @db.Timestamp(6) /// 更新时间
  remark        String?   @db.VarChar(255) /// 备注

  @@map("sys_notice")
}

/// 定时任务调度表
model SysJob {
  jobId          BigInt    @id @default(autoincrement()) @map("job_id") /// 任务ID
  jobName        String?   @default("") @map("job_name") @db.VarChar(64) /// 任务名称
  jobGroup       String?   @default("DEFAULT") @map("job_group") @db.VarChar(64) /// 任务组名
  invokeTarget   String    @map("invoke_target") @db.VarChar(500) /// 调用目标字符串
  cronExpression String?   @default("") @map("cron_expression") @db.VarChar(255) /// cron执行表达式
  misfirePolicy  String?   @default("3") @map("misfire_policy") @db.VarChar(20) /// 计划执行错误策略（1立即执行 2执行一次 3放弃执行）
  concurrent     String?   @default("1") @db.Char(1) /// 是否并发执行（0允许 1禁止）
  status         String?   @default("0") @db.Char(1) /// 状态（0正常 1暂停）
  createBy       String?   @default("") @map("create_by") @db.VarChar(64) /// 创建者
  createTime     DateTime? @default(now()) @map("create_time") @db.Timestamp(6) /// 创建时间
  updateBy       String?   @default("") @map("update_by") @db.VarChar(64) /// 更新者
  updateTime     DateTime? @updatedAt @map("update_time") @db.Timestamp(6) /// 更新时间
  remark         String?   @db.VarChar(500) /// 备注信息

  @@map("sys_job")
}

/// 定时任务调度日志表
model SysJobLog {
  jobLogId      BigInt    @id @default(autoincrement()) @map("job_log_id") /// 任务日志ID
  jobName       String    @map("job_name") @db.VarChar(64) /// 任务名称
  jobGroup      String    @map("job_group") @db.VarChar(64) /// 任务组名
  invokeTarget  String    @map("invoke_target") @db.VarChar(500) /// 调用目标字符串
  jobMessage    String?   @map("job_message") @db.VarChar(500) /// 日志信息
  status        String?   @default("0") @db.Char(1) /// 执行状态（0正常 1失败）
  exceptionInfo String?   @map("exception_info") @db.Text /// 异常信息
  createTime    DateTime? @default(now()) @map("create_time") @db.Timestamp(6) /// 创建时间

  @@map("sys_job_log")
}
